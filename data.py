#!/usr/bin/python
# -*- coding: utf-8 -*-
'''
@AUTHOR:Joselyn Zhao
@CONTACT:zhaojing17@foxmail.com
@HOME_PAGE:joselynzhao.top
@SOFTWERE:PyCharm
@FILE:data.py
@TIME:2019/9/26 15:40
@DES:
'''

gradually_5_15={
    "title":"gradually_5_15",
    "length": 9,
    "mAP" :       [28.2, 30.5, 36.7, 40.0, 47.0, 51.5, 52.7, 54.0,54.1],
    "top1" :      [33.3, 34.8, 43.2, 46.3, 54.4, 59.8, 60.3, 62.8,63.4],
    "top5" :      [50.0, 52.4, 58.4, 62.5, 70.8, 75.8, 76.5, 78.2,78.2],
    "top10" :     [56.0, 59.8, 63.7, 68.9, 76.1, 80.1, 82.5, 82.2,82.8],
    "top20" :     [63.4, 65.7, 69.7, 74.8, 80.8, 85.6, 87.0, 85.9,86.8],
    "label_pre" : [40.8, 43.5, 48.3, 51.3, 56.6, 59.6, 61.6, 62.3,62.7],
    "select_pre" : [94.59, 93.84, 89.95, 86.10, 81.2, 74.48, 65.15, 62.32,62.65],
    "train_pre": [100.0, 99.36, 97.59, 94.96, 91.31, 86.09, 78.72, 74.98, 74.54],
    "select_percent":[0.0, 5.02, 14.19, 26.04, 40.03, 55.96, 73.49, 92.64, 100.0],
    "select_num": [0, 75, 212, 389, 598, 836, 1098, 1384, 1494]
}

gradually_5_13={
    "title":"gradually_5_13",
    "length": 12,
    "mAP" :       [30.2,31.3,35.3,40.8,44.0,49.0,50.3,53.5,54.1,56.0,54.8,55.6],
    "top1" :      [35.9,35.9,40.6,47.3,50.3,57.0,59.4,62.5,62.8,65.4,63.4,64.5],
    "top5" :      [52.1,54.7,56.7,63.8,67.7,72.2,74.1,77.8,77.5,79.1,78.2,78.5],
    "top10" :     [59.4,60.4,63.0,69.7,72.8,76.5,78.5,81.8,81.5,83.6,83.5,82.3],
    "top20" :     [65.0,66.0,70.4,74.6,77.2,81.6,83.0,84.9,85.8,86.6,86.9,86.5],
    "label_pre" : [42.3,42.7,46.9,53.6,56.3,58.2,61.6,63.3,64.1,64.5,64.7,65.3],
    "select_pre" : [95.59,93.99,95.18,92.04,90.08,87.74,83.46,77.58,71.36,64.56,64.73,65.26],
    "train_pre": [100.0, 99.36, 98.98, 97.53, 96.1, 94.27, 91.29, 87.13, 82.4, 76.97, 76.01, 76.32],
    "select_percent":[0.0, 5.02, 12.32, 20.88, 30.32, 40.56, 51.41, 62.78, 74.7, 87.01, 99.8, 100.0],
    "select_num":[0, 75, 184, 312, 453, 606, 768, 938, 1116, 1300, 1491, 1494]
}

gradually_5_10={
    "title":"gradually_5_10",
    "length": 21,
    "p":10,
    "mAP" :        [29.4,30.1,34.0,39.4,40.6,42.2,45.8,47.2,46.9,49.2,51.3,52.1,53.3,56.2,56.4,58.6,56.7,57.1,57.2,56.2,57.6],
    "top1" :       [34.5,34.8,39.7,45.0,47.2,49.4,53.1,54.4,54.7,57.7,59.0,62.0,62.1,66.4,66.4,67.1,65.8,66.8,65.8,65.4,67.2],
    "top5" :       [49.0,52.0,56.7,62.0,63.4,64.5,69.7,71.2,72.4,71.9,76.9,75.8,78.2,79.9,79.2,81.2,78.8,81.1,80.3,80.2,80.5],
    "top10" :      [56.1,60.7,63.1,68.2,69.4,69.9,75.5,75.9,76.8,78.1,80.8,80.6,82.8,83.5,83.5,84.5,82.8,84.6,84.3,84.6,83.8],
    "top20" :      [63.0,66.5,68.8,73.4,76.1,75.5,81.3,81.1,80.5,82.9,83.5,84.0,85.3,87.3,87.7,87.6,87.2,87.9,88.7,87.5,88.2],
    "label_pre" :  [41.8,42.8,45.3,50.1,51.8,54.8,56.0,57.8,57.8,60.0,62.7,62.6,64.7,65.3,66.7,68.1,67.5,67.8,68.2,68.3,68.5],
    "select_pre" : [91.89,91.95,92.86,94.97,96.25,95.09,94.64,93.47,91.34,90.23,88.43,87.50,86.61,84.69,82.05,80.00,77.15,74.18,71.32,68.27,68.54],
    "train_pre": [100.0, 99.1, 98.71, 98.71, 98.8, 98.23, 97.83, 97.14, 96.0, 95.2, 94.0, 93.24, 92.43, 91.1, 89.24, 87.66, 85.56, 83.37, 81.14, 78.75, 78.55],
    "select_percent":[0.0, 5.02, 10.04, 15.06, 20.01, 25.03, 30.05, 35.01, 40.03, 45.05, 50.0, 55.02, 60.04, 65.06, 70.01, 75.03, 80.05, 85.01, 90.03, 95.05, 100.0],
    "select_num":[0, 75, 150, 225, 299, 374, 449, 523, 598, 673, 747, 822, 897, 972, 1046, 1121, 1196, 1270, 1345, 1420, 1494]
}

gradually_5_k15={
    "title":"gradually_5_k15",
    "length": 22,
    "mAP" :       [29.0,28.4,30.8,32.8,34.7,36.5,39.8,42.9,47.3,48.4,49.3,51.2,53.5,53.9,55.8,58.1,56.1,58.2,57.3,56.5,57.2,57.5],
    "top1" :      [35.0,33.2,36.0,38.6,40.7,41.2,46.4,49.6,54.0,57.8,57.8,60.7,63.5,63.8,64.7,67.4,65.2,67.0,66.5,65.2,66.4,67.4],
    "top5" :      [51.4,52.6,51.1,54.3,58.5,58.3,63.7,65.2,70.5,71.1,74.4,74.9,76.6,78.3,79.6,81.2,80.1,81.3,81.1,80.5,80.5,82.3],
    "top10" :     [57.3,58.1,56.7,61.0,63.2,64.2,69.1,70.4,76.2,76.6,79.3,79.2,80.6,81.8,84.2,85.5,85.6,85.8,84.8,83.5,85.6,85.6],
    "top20" :     [62.7,64.7,62.3,67.0,68.4,71.7,74.4,76.1,81.2,82.2,84.0,83.9,84.9,85.9,87.2,88.5,88.6,89.3,88.3,87.0,89.2,88.3],
    "label_pre" : [39.4,41.2,41.9,43.4,47.3,49.7,50.9,54.8,58.6,59.8,60.8,61.9,64.5,66.1,66.8,66.8,67.5,68.1,67.8,68.3,68.3,68.3],
    "select_pre" : [100.0,93.94,95.95,96.15,95.5,95.04,92.53,91.81,90.91,89.77,88.09,85.70,83.87,80.96,77.96,75.17,72.71,70.53,69.15,68.57,68.39,68.34],
    "train_pre": [100.0, 99.86, 99.73, 99.61, 99.28, 98.89, 97.77, 97.12, 96.27, 95.33, 94.06, 92.31, 90.86, 88.7, 86.43, 84.21, 82.25, 80.48, 79.34, 78.75, 78.48, 78.42],
    "select_percent":[0.0, 0.6, 2.28, 5.02, 8.77, 13.45, 18.94, 25.17, 31.93, 39.09, 46.52, 54.02, 61.38, 68.54, 75.3, 81.46, 86.88, 91.57, 95.25, 97.93, 99.53, 100.0],
    "select_num": [0, 9, 34, 75, 131, 201, 283, 376, 477, 584, 695, 807, 917, 1024, 1125, 1217, 1298, 1368, 1423, 1463, 1487, 1494]
}


gradually_11_15={  #ef 1.1  q 1.5
    "title":"gradually_11_15",
    "length": 22,
    "mAP" :       [28.8,29.7,33.2,34.7,33.8,36.3,37.6,39.7,42.5,44.8,46.9,48.6,50.9,52.6,53.9,55.9,57.6,57.5,58.8,57.3,58.0,56.6],
    "top1" :      [33.6,34.9,38.7,39.3,38.9,42.9,43.0,46.0,48.3,51.3,54.0,55.8,59.8,61.5,64.1,65.5,67.0,67.0,67.9,66.4,67.5,65.8],
    "top5" :      [48.7,50.4,55.3,56.0,54.8,58.5,60.4,63.0,64.1,68.2,75.6,72.2,73.6,76.4,77.9,79.9,80.1,79.9,81.2,79.8,79.6,80.1],
    "top10" :     [54.7,56.4,61.3,62.1,61.7,64.7,67.1,67.2,71.8,73.2,75.6,77.6,78.9,80.3,81.9,83.2,84.3,83.5,85.9,84.3,83.9,84.2],
    "top20" :     [61.7,64.2,67.9,68.1,66.4,68.9,73.4,72.6,77.4,78.5,81.1,83.2,82.6,85.2,85.0,85.9,87.6,87.7,89.2,86.5,87.6,87.5],
    "label_pre" : [40.8,40.2,45.6,46.7,43.8,48.5,49.9,50.8,52.6,55.2,57.8,59.4,61.4,63.3,64.1,66.2,65.8,67.1,67.8,68.4,68.4,68.5],
    "select_pre" : [94.12,95.74,97.67,96.21,92.39,91.74,92.79,94.09,92.34,92.69,90.83,90.79,89.88,87.34,85.24,83.56,80.21,76.67,73.2,69.32,68.41,68.47],
    "train_pre":[100.0, 99.86, 99.73, 99.49, 98.68, 98.19, 98.09, 98.11, 97.3, 97.12, 96.07, 95.7, 94.95, 93.35, 91.81, 90.46, 88.08, 85.49, 82.79, 79.75, 78.59, 78.51],
    "select_percent":[0.0, 1.14, 3.15, 5.76, 8.84, 12.32, 16.2, 20.41, 24.9, 29.72, 34.81, 40.16, 45.78, 51.61, 57.63, 63.92, 70.41, 77.11, 84.07, 91.16, 98.39, 100.0],
    "select_num":[0, 17, 47, 86, 132, 184, 242, 305, 372, 444, 520, 600, 684, 771, 861, 955, 1052, 1152, 1256, 1362, 1470, 1494]


}

gradually_55_25={  #ef 0.055  q 2.5
    "title":"gradually_55_25",
    "length": 22,
    "mAP" :       [29.0,27.4,31.2,30.1,29.4,28.9,33.2,32.3,35.0,36.6,39.1,43.5,44.0,46.3,47.6,48.7,51.0,54.7,55.7,56.2,55.8,56.4],
    "top1" :      [34.8,32.3,36.2,35.6,34.9,34.0,37.5,38.3,40.3,42.2,44.3,50.0,49.9,53.7,56.3,56.8,61.5,63.4,64.4,65.8,65.5,65.5],
    "top5" :      [51.0,48.0,53.7,52.0,50.4,48.1,56.8,53.8,56.8,59.8,63.0,67.5,69.7,69.4,71.8,75.1,74.4,77.9,78.5,79.1,78.3,78.5],
    "top10" :     [57.4,54.6,59.7,58.7,56.8,54.6,62.8,61.5,61.7,64.5,68.2,73.4,74.5,74.1,78.1,79.6,78.6,81.9,83.0,83.0,82.5,82.9],
    "top20" :     [65.8,60.5,66.1,65.2,64.2,60.7,67.1,67.1,67.7,70.9,74.4,77.4,78.3,79.8,80.9,83.6,83.3,86.8,87.7,86.0,87.0,86.0],
    "label_pre" : [40.9,38.0,43.6,40.3,39.9,40.2,45.8,43.8,46.2,48.5,51.1,54.6,54.1,56.7,58.2,61.3,61.9,65.7,65.5,66.0,66.0,65.9],
    "select_pre" :[100.0,100.0,100.0,96.30,95.65,98.63,97.2,95.3,95.00,94.23,95.15,94.63,93.21,92.21,89.82,86.34,83.06,80.0,73.24,66.87,66.0,65.93],
    "train_pre" :[100.0, 100.0, 100.0, 99.86, 99.73, 99.87, 99.61, 99.26, 99.06, 98.67, 98.65, 98.26, 97.48, 96.67, 95.25, 93.09, 90.74, 88.35, 83.46, 78.5, 76.98, 76.78],
    "select_percent":[0.0, 0.07, 0.33, 0.87, 1.81, 3.08, 4.89, 7.16, 9.97, 13.39, 17.4, 22.09, 27.44, 33.53, 40.36, 47.99, 56.36, 65.6, 75.64, 86.55, 98.39, 100.0],
    "select_num":[0, 1, 5, 13, 27, 46, 73, 107, 149, 200, 260, 330, 410, 501, 603, 717, 842, 980, 1130, 1293, 1470, 1494]
}


gradually_223_05={  #ef 22.3  q 0.5
    "title":"gradually_223_05",
    "length": 22,
    "mAP" :       [29.9,38.3,43.6,45.7,48.1,50.3,51.6,53.9],
    "top1" :      [35.0,43.4,49.6,53.0,56.1,58.3,61.0,64.1],
    "top5" :      [48.9,61.1,68.1,69.8,72.6,74.2,77.1,77.2],
    "top10" :     [56.4,67.9,72.4,75.6,77.8,79.8,79.9,81.1],
    "top20" :     [64.4,72.8,76.9,80.9,82.2,83.5,84.0,85.6],
    "label_pre" : [41.3,50.5,53.9,56.6,59.6,61.5,63.2,64.0],
    "select_pre" :[81.14,86.86,86.68,86.81,86.98,87.03,86.73,85.58],
    "train_pre" :[],
    "select_percent":[],
    "select_num":[]
}


import  numpy as np
import  math
def get_len(train_name):
    return len(train_name["mAP"])

def percent_gradually_5_k15():
    Nu = 1494.0
    k = 15
    x = np.linspace(1,gradually_5_k15["length"],gradually_5_k15["length"])
    def fun(x):
        num =  min(math.ceil(-(Nu/2) * np.cos((k/100) * (x-1))+(Nu/2)),Nu)
        return round(num)
    xx = list(map(fun,x))
    print("percent_gradually_5_k15",xx)
    return xx

def percent_gradually_5_10():
    Nu = 1494.0
    q = 1.0
    ef = 5
    x = np.linspace(1,gradually_5_10["length"],gradually_5_10["length"])
    def fun(x):
        num =  min(math.ceil(Nu * math.pow(x-1,q)*(ef/100)),Nu)
        return round(num)
    xx = list(map(fun,x))
    print("percent_gradually_5_10",xx)
    return xx

def percent_gradually_5_13():
    Nu = 1494.0
    q = 1.3
    ef = 5
    x = np.linspace(1,gradually_5_13["length"],gradually_5_13["length"])
    def fun(x):
        num =  min(math.ceil(Nu * math.pow(x-1,q)*(ef/100)),Nu)
        return round(num)
    xx = list(map(fun,x))
    print("percent_gradually_5_13",xx)
    return xx

def percent_gradually_5_15():
    Nu = 1494.0
    q = 1.5
    ef = 5
    x = np.linspace(1,gradually_5_15["length"],gradually_5_15["length"])
    def fun(x):
        num =  min(math.ceil(Nu * math.pow(x-1,q)*(ef/100)),Nu)
        return round(num)
    xx = list(map(fun,x))
    print("percent_gradually_5_15",xx)
    return xx


def percent_gradually_11_15():
    Nu = 1494.0
    q = 1.5
    ef = 1.1
    x = np.linspace(1,gradually_11_15["length"],gradually_11_15["length"])
    def fun(x):
        num =  min(math.ceil(Nu * math.pow(x-1,q)*(ef/100)),Nu)
        return round(num)
    xx = list(map(fun,x))
    print("percent_gradually_11_15",xx)
    return xx

def percent_gradually_55_25():
    Nu = 1494.0
    q = 2.5
    ef = 0.055
    x = np.linspace(1,gradually_11_15["length"],gradually_11_15["length"])
    def fun(x):
        num =  min(math.ceil(Nu * math.pow(x-1,q)*(ef/100)),Nu)
        return round(num)
    xx = list(map(fun,x))
    print("percent_gradually_55_25",xx)
    return xx


def get_train_pre(train_name):
    Ln=702
    select_pre = train_name["select_pre"]
    select_num = train_name["select_num"]
    def fun(pre,num):
        return round((math.floor(pre*num/100)+Ln)*100/(num+Ln),2)
    train_pre = list(map(fun,select_pre,select_num))
    print(train_name["title"],train_pre)

def get_train_pre_all():
    train_list = [gradually_5_10, gradually_5_13, gradually_5_15, gradually_5_k15, gradually_11_15,gradually_55_25]
    for train_name in train_list:
        get_train_pre(train_name)






if __name__=="__main__":
    # print(get_len(gradually_5_15))
    # percent_gradually_5_k15()
    get_train_pre_all()